define(["text"],function(text){var CACHE_BUST_QUERY_PARAM="bust",CACHE_BUST_FLAG="!bust",jsonParse="undefined"!=typeof JSON&&"function"==typeof JSON.parse?JSON.parse:function(val){return eval("("+val+")")},buildMap={};function cacheBust(n){return n=n.replace(CACHE_BUST_FLAG,""),(n+=n.indexOf("?")<0?"?":"&")+CACHE_BUST_QUERY_PARAM+"="+Math.round(2147483647*Math.random())}return{load:function(e,n,t,i){!i.isBuild||!1!==i.inlineJSON&&-1===e.indexOf(CACHE_BUST_QUERY_PARAM+"=")?text.get(n.toUrl(e),function(n){i.isBuild?(buildMap[e]=n,t(n)):t(jsonParse(n))},t.error,{accept:"application/json"}):t(null)},normalize:function(n,e){return e(n=-1!==n.indexOf(CACHE_BUST_FLAG)?cacheBust(n):n)},write:function(n,e,t){e in buildMap&&t('define("'+n+"!"+e+'", function(){ return '+buildMap[e]+";});\n")}}});